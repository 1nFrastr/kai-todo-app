# AI输入助手功能需求

## 功能概述

在TODO应用的输入表单组件中集成AI输入助手功能，通过AI生成内容来帮助用户快速填充输入框，提升用户体验和输入效率。

## 功能特性

### 1. AI触发按钮
- **位置**: 在输入框的右侧或右上角添加一个魔法杖图标按钮
- **样式**: 
  - 使用魔法杖（🪄）或类似的AI图标
  - 支持暗黑模式和浅色模式
  - 鼠标悬停时有视觉反馈效果
  - 按钮大小适中，不影响原有输入框布局
- **交互**: 点击按钮触发AI输入面板

### 2. AI输入面板
- **显示方式**: 
  - 点击魔法杖按钮后，在输入框旁边（优先右侧，空间不足时显示在下方）弹出输入面板
  - 面板采用浮动窗口或下拉面板的形式
  - 包含关闭按钮，支持ESC键关闭
- **面板内容**:
  - 提示词输入框（多行文本框）
  - 生成按钮
  - 加载状态指示器
  - 错误提示区域

### 3. AI功能集成
- **提示词处理**:
  - 用户在AI面板中输入描述性文本
  - 支持多语言提示词输入（中文/英文）
  - 提供常用提示词模板或快捷建议
- **内容生成**:
  - 调用AI服务生成相关内容
  - 生成内容应该适合当前输入框的用途（如TODO标题、描述等）
  - 支持重新生成功能
- **内容填充**:
  - 生成的内容自动填充到原输入框
  - 支持用户编辑生成的内容
  - 提供"接受"和"重试"选项

## 技术实现要求

### 1. 前端实现
- **框架**: 基于现有的React + TypeScript技术栈
- **样式**: 使用Sass，确保与现有UI风格一致
- **组件结构**:
  ```
  AIInputAssistant/
  ├── AIInputAssistant.tsx      # 主组件
  ├── AIInputAssistant.scss     # 样式文件
  ├── AIPromptPanel.tsx         # AI提示面板子组件
  └── types.ts                  # 类型定义
  ```

### 2. 状态管理
- **本地状态**: 
  - AI面板显示/隐藏状态
  - 提示词内容
  - 生成状态（加载中、成功、失败）
  - 生成的内容
- **全局状态**: 考虑是否需要保存用户的提示词历史

### 3. API集成
- **后端接口**: 
  - 创建AI内容生成API端点
  - 支持不同类型的内容生成（标题、描述等）
  - 处理错误和超时情况
- **请求格式**:
  ```json
  {
    "prompt": "用户输入的提示词",
    "type": "todo_title | todo_description",
    "language": "zh-cn | en-us"
  }
  ```

### 4. 用户体验优化
- **响应式设计**: 确保在不同屏幕尺寸下正常显示
- **加载状态**: 生成过程中显示加载动画
- **错误处理**: 网络错误、生成失败等情况的友好提示
- **键盘支持**: 支持Tab、Enter、ESC等快捷键操作

## 应用场景

### 1. TODO标题生成
- **输入示例**: "明天要开会讨论项目进度"
- **生成结果**: "参加项目进度讨论会议"

### 2. TODO描述补充
- **输入示例**: "准备季度报告"
- **生成结果**: "收集本季度数据，分析业务指标，撰写总结报告，准备演示文稿"

### 3. 任务分解
- **输入示例**: "学习React"
- **生成结果**: "阅读React官方文档，完成基础教程，构建第一个应用"

## 多语言支持

### 1. 界面文本
- 魔法杖按钮提示文本
- AI面板标题和按钮文本
- 错误提示信息
- 占位符文本

### 2. 提示词模板
- 提供中英文常用提示词模板
- 根据用户语言设置显示对应模板

## 可选增强功能

### 1. 智能建议
- 根据用户历史输入提供智能提示词建议
- 学习用户习惯，优化生成内容

### 2. 批量生成
- 支持一次生成多个相关任务
- 提供任务模板功能

### 3. 集成更多AI能力
- 文本优化和润色
- 语言翻译
- 情感分析和优先级建议

## 实现步骤

1. **设计UI原型**: 确定AI按钮和面板的视觉设计
2. **创建基础组件**: 实现AIInputAssistant组件框架
3. **集成到现有表单**: 在TodoForm组件中集成AI助手
4. **实现后端API**: 创建AI内容生成接口
5. **完善交互逻辑**: 实现完整的用户交互流程
6. **测试和优化**: 进行功能测试和用户体验优化
7. **多语言适配**: 完成中英文界面适配

## 验收标准

- [ ] AI按钮正确显示在输入框旁边
- [ ] 点击按钮能正确打开/关闭AI面板
- [ ] 输入提示词能成功生成相关内容
- [ ] 生成的内容能正确填充到输入框
- [ ] 支持暗黑模式和浅色模式
- [ ] 支持中英文界面切换
- [ ] 错误情况有友好的提示信息
- [ ] 在不同屏幕尺寸下正常显示
- [ ] 键盘快捷键正常工作
- [ ] 无明显性能问题和内存泄漏
